<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SC&O ì¬ë¯¸ MBTI ì°¾ê¸° â€” EY ìŠ¤íƒ€ì¼</title>
  <meta name="description" content="EY SC&O íŒ€ ì „ìš© 16ìœ í˜• ì¬ë¯¸ í…ŒìŠ¤íŠ¸: ì¥í‘œ/ì—‘ì…€/ë¦¬ì„œì¹˜/PM/ê³ ê°/ì•¼ê·¼/ì•¼ì‹/ì»¤í”¼ ë°ˆê¹Œì§€ ë°˜ì˜í•œ ë¦¬ì–¼ ì»¨ì„¤íŒ… ë²„ì „" />
  <style>
    :root{
      --bg: #0b1220;
      --panel: #111827ee;
      --panel-2: #0f172acc;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #60a5fa;
      --accent-2: #34d399;
      --border: #1f2937;
      --danger: #f87171;
      --ok: #4ade80;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; padding:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple SD Gothic Neo','Noto Sans KR',sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, #1f2937 0%, #0b1225 50%, #020617 100%);
    }
    a{color:var(--accent)}
    .wrap{max-width:880px; margin:0 auto; padding:24px}
    header{display:flex; align-items:center; gap:12px; margin-bottom:16px}
    header .badge{font-size:12px; color:var(--muted); border:1px solid var(--border); padding:4px 8px; border-radius:999px}
    .card{
      background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border:1px solid var(--border); border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.25)
    }
    h1{font-size:28px; margin:8px 0 0}
    h2{font-size:22px; margin:0 0 8px}
    p{color:var(--muted); line-height:1.6}
    .grid{display:grid; gap:16px}
    .grid.q{grid-template-columns:1fr}
    @media(min-width:720px){ .grid.q{grid-template-columns:1fr 1fr} }

    .btn{appearance:none; border:1px solid var(--border); background:#0b1220; color:var(--text); padding:12px 14px; border-radius:12px; cursor:pointer; font-size:15px; line-height:1.3; text-align:left; transition:transform .06s ease, background .2s ease, border .2s ease}
    .btn:hover{transform:translateY(-1px); border-color:#334155}
    .btn:focus{outline:2px solid var(--accent); outline-offset:2px}

    .primary{background:linear-gradient(180deg,#1e293b 0%,#0b1220 100%)}

    .controls{display:flex; gap:8px; justify-content:space-between; align-items:center; margin-top:16px}
    .controls .left{display:flex; gap:8px}

    .btn-pill{border-radius:999px; padding:10px 14px; font-weight:600}

    .progress{height:10px; background:#0b1322; border:1px solid var(--border); border-radius:999px; overflow:hidden; margin:14px 0}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent) 0%, #a78bfa 100%)}

    .pill{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; background:#0a1322; color:#cbd5e1; border:1px solid var(--border); border-radius:999px; font-size:12px}

    .result{display:flex; flex-direction:column; gap:8px; align-items:flex-start}
    .result h2{display:flex; align-items:center; gap:8px; font-size:24px; margin:0}
    .desc{color:#cbd5e1}

    .bars{display:grid; gap:10px; margin-top:12px}
    .bar{display:flex; align-items:center; gap:8px}
    .bar .name{min-width:200px; color:#cbd5e1; font-size:14px}
    .bar .meter{flex:1; height:10px; background:#0a1322; border:1px solid var(--border); border-radius:8px; overflow:hidden}
    .bar .meter > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent-2) 0%, var(--accent) 100%)}

    footer{margin:48px 0 16px; color:var(--muted); font-size:12px; text-align:center}

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <span class="badge">EY SC&O Â· íŒ€ ë°ˆ í…ŒìŠ¤íŠ¸</span>
      <span class="badge">16 ìœ í˜• Â· 13 ë¬¸í•­</span>
    </header>

    <div id="app" class="card">
      <div id="start">
        <h1>SC&O ì¬ë¯¸ MBTI ì°¾ê¸°</h1>
        <p>ì¥í‘œÂ·ì—‘ì…€Â·ë¦¬ì„œì¹˜Â·PMÂ·ê³ ê°Â·ì•¼ê·¼Â·ì•¼ì‹Â·ì»¤í”¼â€¦ ë¦¬ì–¼ ì»¨ì„¤íŒ… ë°ˆìœ¼ë¡œ ë³´ëŠ” ìš°ë¦¬ íŒ€ì˜ 16ìœ í˜• í…ŒìŠ¤íŠ¸ ğŸ”</p>
        <div class="progress" aria-hidden="true"><i style="width:0%"></i></div>
        <div class="controls">
          <div class="left">
            <button id="btnStart" class="btn btn-pill primary" aria-label="í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°">ì‹œì‘í•˜ê¸°</button>
          </div>
          <div class="right pill">ë¬´ê¸°: ì¥í‘œÂ·ì—‘ì…€Â·ë¦¬ì„œì¹˜ Â· ê·œì¹™: ë‹¨ì¼ ê²°ê³¼</div>
        </div>
      </div>

      <div id="quiz" hidden>
        <div class="pill" id="qMeta">Q<span id="qNum">1</span> / <span id="qTotal">13</span></div>
        <h2 id="qText">ë¬¸í•­</h2>
        <div class="progress" aria-label="ì§„í–‰ë„"><i id="qProg" style="width:0%"></i></div>
        <div class="grid q" id="options"></div>
        <div class="controls">
          <div class="left">
            <button id="btnPrev" class="btn btn-pill" aria-label="ì´ì „ìœ¼ë¡œ">â† ì´ì „</button>
            <button id="btnReset" class="btn btn-pill" aria-label="ì´ˆê¸°í™”">â†º ì²˜ìŒë¶€í„°</button>
          </div>
          <div class="right pill" id="helper">ì„ íƒ í›„ ë‹¤ìŒ ë¬¸í•­ìœ¼ë¡œ ìë™ ì§„í–‰</div>
        </div>
      </div>

      <div id="result" hidden>
        <div class="pill">ê²°ê³¼</div>
        <div class="result">
          <h2><span id="resEmoji">ğŸ¯</span> <span id="resName">ìœ í˜•ëª…</span></h2>
          <div id="resDesc" class="desc">ì„¤ëª…</div>
          <div class="pill" id="resRule">ë™ì  ê·œì¹™ ì ìš©: í•µì‹¬ ë¬¸í•­(Q4Â·Q6Â·Q7) â–¶ï¸ íƒ€ì´ë¸Œë ˆì´ì»¤(Q13)</div>
          <div class="bars" id="resBars" aria-label="ìƒìœ„ ìœ í˜• ë¶„í¬"></div>
        </div>
        <div class="controls">
          <div class="left">
            <button id="btnAgain" class="btn btn-pill primary">ë‹¤ì‹œ í•˜ê¸°</button>
          </div>
          <div class="right">
            <button id="btnCopy" class="btn btn-pill" title="ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬">ê²°ê³¼ ë³µì‚¬</button>
          </div>
        </div>
      </div>
    </div>

    <footer>
      Made for EY SC&O Â· ê¹ƒí—ˆë¸Œ í˜ì´ì§€ë¡œ ë°°í¬í•˜ê¸° ì¢‹ê²Œ ë‹¨ì¼ íŒŒì¼ë¡œ ì œì‘ë¨ Â· ê°œì¸ì •ë³´/ì¶”ì  ì—†ìŒ
    </footer>
  </div>

<script>
(function(){
  // ====== ìœ í˜• ì •ì˜ ======
  const TYPES = [
    {id:1, key:'excel', emoji:'ğŸ“Š', name:'ì—‘ì…€ ê´´ë„í˜•', desc:'ìˆ˜ì‹ê³¼ í”¼ë²—ìœ¼ë¡œ ë°¤ì„ ì§€ìƒˆìš°ëŠ” ë°ì´í„° ì¥ì¸'},
    {id:2, key:'slide', emoji:'ğŸ—‚ï¸', name:'ì¥í‘œ ì¥ì¸í˜•', desc:'ì¥í‘œ ë””ìì¸ì— ì˜í˜¼ì„ ê°ˆì•„ ë„£ëŠ” ì¥í‘œ ê³µì˜ˆê°€'},
    {id:3, key:'deadline', emoji:'â°', name:'ë°ë“œë¼ì¸ ì¶”ê²©ìí˜•', desc:'ë§ˆê° ì§ì „ 1ì‹œê°„ì— í­ë°œí•˜ëŠ” ì§‘ì¤‘ë ¥ì˜ ì†Œìœ ì'},
    {id:4, key:'snack', emoji:'ğŸ—', name:'ì•¼ì‹ ì¡°ë‹¬ìí˜•', desc:'íŒ€ì˜ ì•¼ê·¼ ìƒì¡´ì„ ì±…ì„ì§€ëŠ” ê°„ì‹ ì„œí¬í„°'},
    {id:5, key:'meme', emoji:'ğŸ¥', name:'ë°ˆ ì œì¡°ê¸°í˜•', desc:'ë‹¨í†¡ë°©ì— ì§¤ê³¼ ë“œë¦½ì„ ìŸì•„ë‚´ëŠ” ë¶„ìœ„ê¸° ë©”ì´ì»¤'},
    {id:6, key:'mental', emoji:'ğŸ§˜', name:'ë©˜íƒˆ ê°€ë“œí˜•', desc:'â€œë‹¤ ì˜ ë  ê²ë‹ˆë‹¤ ğŸ™â€ ë©˜íƒˆ ë°©íŒ¨'},
    {id:7, key:'research', emoji:'ğŸ”', name:'ë¦¬ì„œì¹˜ ê´‘ë¶€í˜•', desc:'ë³´ê³ ì„œ/ë…¼ë¬¸ ëê¹Œì§€ íŒŒê³ ë“œëŠ” ìë£Œ ìˆ˜ì§‘ê°€'},
    {id:8, key:'switch', emoji:'ğŸ®', name:'ì—…ë¬´/ë†€ì´ ìŠ¤ìœ„ì¹˜í˜•', desc:'ì¼í•  ë• ë¹¡ì„¸ê²Œ, ë†€ ë• ì‹ ë‚˜ê²Œ'},
    {id:9, key:'pm', emoji:'ğŸ‘‘', name:'PM ê¶Œë ¥í˜•', desc:'PMì˜ ë§ì´ ê³§ ë²•ì¸ í”„ë¡œì íŠ¸ ì§€ë°°ì'},
    {id:10, key:'honor', emoji:'ğŸ†', name:'ëª…ì˜ˆ EYí˜•', desc:'â€œEYì˜ ëª…ì˜ˆë¥¼ ê±¸ê³ â€¦â€ ì±…ì„ê° ëíŒì™•'},
    {id:11, key:'check', emoji:'ğŸ§¾', name:'ì²´í¬ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ìí˜•', desc:'To-do ë¦¬ìŠ¤íŠ¸ ì—†ìœ¼ë©´ ë¶ˆì•ˆí•œ ê¼¼ê¼¼ì´'},
    {id:12, key:'radar', emoji:'ğŸ“¡', name:'ê³ ê° ë ˆì´ë”í˜•', desc:'ê³ ê° í‘œì •Â·ë§íˆ¬ì—ì„œ ê¸°ë¥˜ë¥¼ ì½ì–´ë‚´ëŠ” ëˆˆì¹˜ì™•'},
    {id:13, key:'process', emoji:'ğŸ”§', name:'í”„ë¡œì„¸ìŠ¤ ìµœì í™”í˜•', desc:'ì–¸ì œë‚˜ íš¨ìœ¨í™”ì™€ í‘œì¤€í™”ë¥¼ ì™¸ì¹˜ëŠ” ê°œì„ ê°€'},
    {id:14, key:'refhunter', emoji:'ğŸ•µï¸', name:'ë‚´ë¶€ ë ˆí¼ëŸ°ìŠ¤ í—Œí„°í˜•', desc:'SharePointì™€ ì˜› ë³´ê³ ì„œ ë”ë¯¸ë¥¼ ëë‚´ ì°¾ì•„ë‚´ëŠ” íƒí—˜ê°€'},
    {id:15, key:'coffee', emoji:'â˜•', name:'ì»¤í”¼ ì¸í“¨ì €í˜•', desc:'ì¹´í˜ì¸ì´ ëŠê¸°ë©´ ì—…ë¬´ íš¨ìœ¨ 0%'},
    {id:16, key:'story', emoji:'ğŸ¤', name:'ìŠ¤í† ë¦¬í…”ëŸ¬í˜•', desc:'ì¥í‘œë³´ë‹¤ ë§ë¹¨ë¡œ ê³ ê°ì„ ì„¤ë“í•˜ëŠ” ì–¸ë³€ê°€'},
  ];

  // ìš°ì„ ìˆœìœ„ í…Œì´ë¸” (ìµœí›„ ë™ì  ë°±ì—…)
  const PRIORITY = [9,2,1,7,10,11,12,13,15,4,6,5,14,16,8,3];
  // í•µì‹¬ ë¬¸í•­ (1-based â†’ ê³„ì‚° ì‹œ 0-based ì‚¬ìš©)
  const CORE_Q = [4,6,7];
  // íƒ€ì´ë¸Œë ˆì´ì»¤ ë¬¸í•­
  const TIE_Q = 13;

  // ====== ì§ˆë¬¸ ì •ì˜ (í…ìŠ¤íŠ¸ & ë³´ê¸° ë¼ë²¨ & ë§¤í•‘) ======
  const QUESTIONS = [
    {
      text:'í”„ë¡œì íŠ¸ í‚¥ì˜¤í”„ ì²«ë‚ , ë‚˜ëŠ”?',
      options:[
        {label:'A. ë°ì´í„° ì†ŒìŠ¤ë¶€í„° ë¬»ëŠ”ë‹¤', type:1},
        {label:'B. ì¥í‘œ í…œí”Œë¦¿ë¶€í„° í™•ì¸í•œë‹¤', type:2},
        {label:'C. ë¦¬ì„œì¹˜ ë°©í–¥ì„±ì„ ê³ ë¯¼í•œë‹¤', type:7},
        {label:'D. â€œPMë‹˜ ë§ì”€ëŒ€ë¡œ í•˜ê² ìŠµë‹ˆë‹¤â€', type:9},
      ]
    },
    {
      text:'ì•¼ê·¼ì´ í™•ì •ëë‹¤. ì œì¼ ë¨¼ì € í•˜ëŠ” í–‰ë™ì€?',
      options:[
        {label:'A. ì»¤í”¼ ì‚¬ëŸ¬ ë‚˜ê°„ë‹¤', type:15},
        {label:'B. ë°°ë¯¼ì•± ì¼ ë‹¤', type:4},
        {label:'C. ì²´í¬ë¦¬ìŠ¤íŠ¸ ì •ë¦¬í•œë‹¤', type:11},
        {label:'D. â€œë‹¤ ì˜ ë  ê±°ì•¼â€ë¼ê³  ë‹¤ë…ì¸ë‹¤', type:6},
      ]
    },
    {
      text:'ì¥í‘œ ì‘ì—…ì—ì„œ ë‚´ê°€ ì œì¼ ì‹ ê²½ ì“°ëŠ” ê±´?',
      options:[
        {label:'A. ê¸€ì ì •ë ¬/ê°„ê²© ì™„ë²½í•˜ê²Œ', type:2},
        {label:'B. ê³ ê°ì´ ë“£ê³  ì‹¶ì€ íë¦„/ìŠ¤í† ë¦¬', type:16},
        {label:'C. EY ë‚´ë¶€ ë ˆí¼ëŸ°ìŠ¤ ê¼­ ë„£ê¸°', type:14},
        {label:'D. â€œEY ëª…ì˜ˆì— ë¶€ë„ëŸ½ì§€ ì•Šê²Œâ€', type:10},
      ]
    },
    { // Q4 (í•µì‹¬)
      text:'ê³ ê°ê³¼ì˜ ë¯¸íŒ… ì¤‘ ë‚˜ëŠ”?',
      options:[
        {label:'A. ê³ ê° í‘œì •ë§Œ ë´ë„ ë¶„ìœ„ê¸° ì½ìŒ', type:12},
        {label:'B. ê³ ê°ì´ ë­˜ ìš”êµ¬í• ì§€ ë¯¸ë¦¬ ë¦¬ìŠ¤íŠ¸í™”', type:11},
        {label:'C. ë§ˆê° ì¼ì • ìƒê°í•˜ë©° ì†ìœ¼ë¡œ í•œìˆ¨', type:3},
        {label:'D. ê³ ê°ì´ ì›í•˜ëŠ” ê±´ ê²°êµ­ ë°ì´í„°', type:1},
      ]
    },
    {
      text:'ë¦¬ì„œì¹˜ë¥¼ í•  ë•Œ ë‚˜ëŠ”?',
      options:[
        {label:'A. êµ¬ê¸€/ë…¼ë¬¸ ëê¹Œì§€ íŒŒê³ ë“ ë‹¤', type:7},
        {label:'B. EY ë‚´ë¶€ ìë£Œì°½ê³ ë¥¼ ë’¤ì§„ë‹¤', type:14},
        {label:'C. íŒ€ ë‹¨í†¡ë°©ì— ë°ˆ ë˜ì§€ê³  ìˆë‹¤ê°€ ì‹œì‘', type:5},
        {label:'D. â€œì´ í”„ë¡œì„¸ìŠ¤ ìì²´ê°€ ë¹„íš¨ìœ¨ì ì´ì•¼â€', type:13},
      ]
    },
    { // Q6 (í•µì‹¬)
      text:'ë°ë“œë¼ì¸ ì§ì „ 1ì‹œê°„, ë‚˜ëŠ”?',
      options:[
        {label:'A. ìˆ˜ì‹/ë°ì´í„° ë‹¤ì‹œ ëŒë ¤ë³¸ë‹¤', type:1},
        {label:'B. ì¥í‘œ ë ˆì´ì•„ì›ƒ ê³ ì¹˜ëŠë¼ ì‹ì€ë•€', type:2},
        {label:'C. ë¦¬ìŠ¤íŠ¸ë¥¼ ì²´í¬í•˜ë©° ë¹ ì§„ ê±¸ ì ê²€', type:11},
        {label:'D. ì»¤í”¼ ë‘ ì” ì›ìƒ·', type:15},
      ]
    },
    { // Q7 (í•µì‹¬)
      text:'PMì´ â€œë°©í–¥ ë°”ê¾¸ìâ€ê³  í•˜ë©´?',
      options:[
        {label:'A. ì—‘ì…€ ì‹œíŠ¸ ìƒˆë¡œ ì—°ë‹¤', type:1},
        {label:'B. ì¥í‘œ ë ˆì´ì•„ì›ƒ ê°ˆì•„ì—ëŠ”ë‹¤', type:2},
        {label:'C. ë¦¬ì„œì¹˜ ë‹¤ ìƒˆë¡œ í•œë‹¤ê³  ìš¸ìƒ', type:7},
        {label:'D. â€œPM ëœ»ì´ ê³§ ì§„ë¦¬â€', type:9},
      ]
    },
    {
      text:'ì£¼ë§ ë‚˜ëŠ”?',
      options:[
        {label:'A. ë„·í”Œ/ê²Œì„ìœ¼ë¡œ ì¶©ì „', type:8},
        {label:'B. ë…¼ë¬¸/ë³´ê³ ì„œ PDF ì½ìŒ', type:7},
        {label:'C. íŒ€ ë‹¨í†¡ë°©ì— ë°ˆ íˆ¬ì²™', type:5},
        {label:'D. ë‹¤ìŒì£¼ ì¼ì •í‘œ/ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‘ì„±', type:11},
      ]
    },
    {
      text:'íŒ€ì›Œí¬ê°€ í”ë“¤ë¦´ ë•Œ ë‚˜ëŠ”?',
      options:[
        {label:'A. â€œë‹¤ ì˜ ë  ê±°ì˜ˆìš”~â€ë¼ê³  ë‹¤ë…ì„', type:6},
        {label:'B. ì•¼ì‹ ë‹¨í†¡ë°© ê°œì„¤', type:4},
        {label:'C. ë°ì´í„° ê·¼ê±°ë¡œ íŒ€ ì„¤ë“', type:1},
        {label:'D. í”„ë¡œì„¸ìŠ¤ ê°œì„ ì•ˆì„ ì œì•ˆ', type:13},
      ]
    },
    {
      text:'ê³ ê° ë¯¸íŒ… ëë‚˜ê³  ë‚˜ëŠ”?',
      options:[
        {label:'A. â€œì˜¤ëŠ˜ ì¥í‘œ ë°˜ì‘ ë‚˜ì˜ì§€ ì•Šì•˜ë„¤â€', type:2},
        {label:'B. â€œìë£Œ ìš”ì²­ ë˜ ì™”ë‹¤â€¦â€', type:7},
        {label:'C. ê³ ê° í‘œì • ë³µê¸°í•˜ë©° ë¶„ìœ„ê¸° ë¶„ì„', type:12},
        {label:'D. â€œì´ê±´ EYì˜ ëª…ì˜ˆë¥¼ ì§€ì¼œëƒˆë‹¤â€', type:10},
      ]
    },
    {
      text:'ì¼í•˜ë‹¤ê°€ ì²´ë ¥ì´ ë–¨ì–´ì§ˆ ë•Œ ë‚˜ëŠ”?',
      options:[
        {label:'A. ì•„ì•„ í•œ ì” ì¶”ê°€', type:15},
        {label:'B. ì ê¹ ìœ íŠœë¸Œ/ê²Œì„', type:8},
        {label:'C. ë°ˆ ê³µìœ í•˜ë©° ì›ƒìŒ ì°¾ê¸°', type:5},
        {label:'D. ë‹¤ì‹œ í•œ ë²ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸ ë“¤ì—¬ë‹¤ë³´ê¸°', type:11},
      ]
    },
    {
      text:'ê³ ê° ìš”êµ¬ê°€ ë„ˆë¬´ ë§ì„ ë•Œ ë‚˜ëŠ”?',
      options:[
        {label:'A. â€œê·¸ê±´ ë§ˆê° ì¼ì •ìƒ ì–´ë µìŠµë‹ˆë‹¤â€ ë‹¨í˜¸ ëª¨ë“œ', type:3},
        {label:'B. ê²°êµ­ ë‹¤ í•´ì¤Œ', type:10},
        {label:'C. ê³ ê° ë§ ë‹¤ ë°›ì•„ì ìŒ', type:12},
        {label:'D. â€œí‘œì¤€í™”í•˜ë©´ ì¤„ì–´ë“­ë‹ˆë‹¤â€ ì œì•ˆ', type:13},
      ]
    },
    { // Q13 (íƒ€ì´ë¸Œë ˆì´ì»¤)
      text:'íŒ€ ë‚´ì—ì„œ ìì£¼ ë“£ëŠ” ë§ì€?',
      options:[
        {label:'A. â€œë„ˆ ì—†ìœ¼ë©´ ìš°ë¦¬ ë‹¤ ì£½ì—ˆì–´â€', type:1},
        {label:'B. â€œì™€ ì¥í‘œ ì§„ì§œ ê¹”ë”í•˜ë‹¤â€', type:2},
        {label:'C. â€œë°ˆ ê³µìœ  ì¢€ ê·¸ë§Œã…‹ã…‹â€', type:5},
        {label:'D. â€œì´ê±´ ë„¤ ê¼¼ê¼¼í•¨ ë•ë¶„ì´ì•¼â€', type:11},
      ]
    },
  ];

  // ====== ìƒíƒœ ======
  let idx = 0; // 0-based í˜„ì¬ ë¬¸í•­
  const answers = Array(QUESTIONS.length).fill(null); // ê° ë¬¸í•­ ì„ íƒëœ type id

  // ====== ì—˜ë¦¬ë¨¼íŠ¸ ======
  const $start = document.getElementById('start');
  const $quiz = document.getElementById('quiz');
  const $result = document.getElementById('result');

  const $btnStart = document.getElementById('btnStart');
  const $btnPrev = document.getElementById('btnPrev');
  const $btnReset = document.getElementById('btnReset');
  const $btnAgain = document.getElementById('btnAgain');
  const $btnCopy = document.getElementById('btnCopy');

  const $qNum = document.getElementById('qNum');
  const $qTotal = document.getElementById('qTotal');
  const $qText = document.getElementById('qText');
  const $qProg = document.getElementById('qProg');
  const $opt = document.getElementById('options');

  const $resEmoji = document.getElementById('resEmoji');
  const $resName = document.getElementById('resName');
  const $resDesc = document.getElementById('resDesc');
  const $resBars = document.getElementById('resBars');

  // ====== ì´ˆê¸°í™” ======
  $qTotal.textContent = String(QUESTIONS.length);

  function showStart(){
    $start.hidden = false; $quiz.hidden = true; $result.hidden = true;
    progress(0);
  }
  function showQuiz(){
    $start.hidden = true; $quiz.hidden = false; $result.hidden = true;
    renderQ();
  }
  function showResult(){
    $start.hidden = true; $quiz.hidden = true; $result.hidden = false;
  }

  function progress(n){
    const p = Math.max(0, Math.min(100, n));
    const bars = document.querySelectorAll('.progress > i');
    bars.forEach(b => b.style.width = p + '%');
  }

  function renderQ(){
    $qNum.textContent = String(idx+1);
    $qText.textContent = QUESTIONS[idx].text;
    progress(((idx)/QUESTIONS.length)*100);
    $opt.innerHTML = '';
    QUESTIONS[idx].options.forEach((op, i)=>{
      const b = document.createElement('button');
      b.className = 'btn';
      b.textContent = op.label;
      b.setAttribute('data-i', i);
      b.setAttribute('aria-pressed', answers[idx] === op.type ? 'true':'false');
      b.addEventListener('click', ()=>selectOption(op.type));
      $opt.appendChild(b);
    });
    // í¬ì»¤ìŠ¤ ì´ë™
    setTimeout(()=>{
      const first = $opt.querySelector('.btn');
      if(first) first.focus();
    }, 10);
  }

  function selectOption(type){
    answers[idx] = type;
    // ë‹¤ìŒìœ¼ë¡œ
    if(idx < QUESTIONS.length-1){
      idx++;
      renderQ();
    } else {
      finalize();
    }
  }

  function finalize(){
    progress(100);
    const tally = tallyScores(answers);
    const winner = pickWinner(tally, answers);
    const type = TYPES.find(t=>t.id===winner) || TYPES[0];

    $resEmoji.textContent = type.emoji;
    $resName.textContent = type.name;
    $resDesc.textContent = type.desc;

    // Top 5 ë§‰ëŒ€ ê·¸ë˜í”„
    const top = Object.entries(tally).sort((a,b)=>b[1]-a[1]).slice(0,5);
    $resBars.innerHTML = '';
    top.forEach(([tid,score])=>{
      const t = TYPES.find(x=>x.id===Number(tid));
      if(!t) return;
      const div = document.createElement('div');
      div.className='bar';
      const name = document.createElement('div');
      name.className='name'; name.textContent = `${t.emoji} ${t.name}`;
      const meter = document.createElement('div'); meter.className='meter';
      const i = document.createElement('i'); i.style.width = (score/Math.max(1,answers.length))*100 + '%';
      meter.appendChild(i);
      const val = document.createElement('div'); val.className='name'; val.style.minWidth='auto'; val.textContent = `${score}ì `;
      div.appendChild(name); div.appendChild(meter); div.appendChild(val);
      $resBars.appendChild(div);
    });

    showResult();
  }

  function tallyScores(ans){
    const map = {};
    ans.forEach(t=>{ if(!t) return; map[t] = (map[t]||0)+1; });
    return map;
  }

  // === ë™ì  í•´ì†Œ: í•µì‹¬ ë¬¸í•­ â–¶ íƒ€ì´ë¸Œë ˆì´ì»¤ â–¶ ìš°ì„ ìˆœìœ„ ===
  function pickWinner(tally, ans){
    // 1) ìµœë‹¤ ë“ì  ì§‘í•©
    const max = Math.max(...Object.values(tally));
    let top = Object.keys(tally).filter(k=>tally[k]===max).map(Number);
    if(top.length===1) return top[0];

    // 2) í•µì‹¬ ë¬¸í•­ ìš°ì„  (Q4, Q6, Q7)
    const coreCounts = {};
    CORE_Q.forEach(qn=>{
      const t = ans[qn-1]; // 0-based
      if(!t) return;
      if(!coreCounts[t]) coreCounts[t]=0;
      coreCounts[t]++;
    });
    const coreMax = Math.max(0, ...top.map(t=>coreCounts[t]||0));
    const topCore = top.filter(t => (coreCounts[t]||0) === coreMax);
    if(topCore.length===1) return topCore[0];
    top = topCore.length ? topCore : top; // ì¢í˜€ì§€ì§€ ì•Šìœ¼ë©´ ê¸°ì¡´ ìœ ì§€

    // 3) íƒ€ì´ë¸Œë ˆì´ì»¤ ë¬¸í•­ Q13ì˜ ì„ íƒì„ ìµœì¢… ê²°ì •ê¶Œìœ¼ë¡œ
    const tieType = ans[TIE_Q-1];
    if(tieType && top.includes(tieType)) return tieType;

    // 4) ë§ˆì§€ë§‰ ì•ˆì „ì¥ì¹˜: ìš°ì„ ìˆœìœ„ í…Œì´ë¸”
    for(const tid of PRIORITY){ if(top.includes(tid)) return tid; }
    // í˜¹ì‹œë¼ë„ ì ìˆ˜ë§µì— ì—†ëŠ” ê²½ìš°, ì „ì²´ ìš°ì„ ìˆœìœ„ ìµœìƒìœ„
    return PRIORITY[0];
  }

  // ====== ì´ë²¤íŠ¸ ======
  document.getElementById('btnStart').addEventListener('click', ()=>{ idx=0; answers.fill(null); showQuiz(); });
  document.getElementById('btnPrev').addEventListener('click', ()=>{ if(idx>0){ idx--; renderQ(); } });
  document.getElementById('btnReset').addEventListener('click', ()=>{ idx=0; answers.fill(null); showStart(); });
  document.getElementById('btnAgain').addEventListener('click', ()=>{ idx=0; answers.fill(null); showQuiz(); });

  document.getElementById('btnCopy').addEventListener('click', ()=>{
    const tally = tallyScores(answers);
    const winner = pickWinner(tally, answers);
    const t = TYPES.find(x=>x.id===winner);
    const txt = `SC&O 16ìœ í˜• í…ŒìŠ¤íŠ¸ ê²°ê³¼\n\në‚˜ì˜ ìœ í˜•: ${t.emoji} ${t.name}\nì„¤ëª…: ${t.desc}\n\nìƒìœ„ ë¶„í¬: ` +
      Object.entries(tally).sort((a,b)=>b[1]-a[1]).slice(0,5).map(([tid,score])=>{
        const tt=TYPES.find(x=>x.id===Number(tid)); return `${tt?.emoji||''}${tt?.name||''} ${score}ì `;
      }).join(', ');
    navigator.clipboard.writeText(txt).then(()=>{
      const $btn = document.getElementById('btnCopy');
      $btn.textContent = 'ë³µì‚¬ë¨ âœ…'; setTimeout(()=>{$btn.textContent='ê²°ê³¼ ë³µì‚¬';}, 1400);
    });
  });

  // í‚¤ë³´ë“œ ì ‘ê·¼ì„±: â† ì´ì „ / Enter ì²« ì„ íƒ
  document.addEventListener('keydown', (e)=>{
    if($quiz.hidden) return;
    if(e.key==='ArrowLeft'){ document.getElementById('btnPrev').click(); }
    if(e.key==='Enter'){
      const first = $opt.querySelector('.btn');
      if(first) first.click();
    }
  });

  // ì‹œì‘ í™”ë©´ í‘œì‹œ
  showStart();
})();
</script>
</body>
</html>
