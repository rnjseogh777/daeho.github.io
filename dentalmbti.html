<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>âš¡ ì¹˜ìœ„ìƒì‚¬ ë§ì¶¤í˜• 10ìœ í˜• MBTI</title>
  <meta name="description" content="ì¹˜ê³¼ ì¹˜ìœ„ìƒì‚¬/ìƒë‹´ ì‹¤ë¬´ ìƒí™© ê¸°ë°˜ 10ìœ í˜• í…ŒìŠ¤íŠ¸ â€” ì§„ìƒ í™˜ì, í‡´ê·¼ 5ë¶„ ì „, ì•¼ê°„ ê·¼ë¬´ ë“± ë¦¬ì–¼ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ìœ í˜•!" />
  <style>
    :root{
      --bg:#0b1020; --panel:#11162a; --ink:#e8ebf4; --muted:#9aa3b2; --brand:#7c9dff; --accent:#68e4c6; --line:#1e2642; --good:#86efac; --warn:#fbbf24;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;
      background:
        radial-gradient(1200px 800px at 85% -10%, #1b2450 0%, #0f1430 45%, var(--bg) 100%),
        linear-gradient(180deg, #0b1020 0%, #0b1020ee 40%, #0b1020 100%);
      color:var(--ink); line-height:1.6;
    }
    a{color:var(--brand); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:920px; margin:0 auto; padding:28px 16px 80px}
    header{display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:16px;}
    .title{display:flex; gap:12px; align-items:center;}
    h1{font-size:1.35rem; margin:0}
    .badge{font-size:.8rem; color:#c7cffb; background:rgba(124,157,255,.12); border:1px solid rgba(124,157,255,.35); padding:4px 8px; border-radius:999px}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
      border:1px solid var(--line);
      border-radius:16px; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,.35);
    }
    .muted{color:var(--muted)}
    .progress{height:8px; background:#0d1230; border:1px solid var(--line); border-radius:999px; overflow:hidden}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--brand), var(--accent))}
    .q{margin:16px 0 12px; font-weight:700; font-size:1.05rem;}
    .optgrid{display:grid; gap:10px; grid-template-columns:repeat(2, minmax(0, 1fr));}
    .opt{
      border:1px solid var(--line); padding:12px 12px; border-radius:12px; cursor:pointer; background:#0d1330;
      display:flex; gap:10px; align-items:flex-start;
    }
    .opt input{margin-top:3px}
    .opt:hover{border-color:#2b3568}
    .opt[selected]{outline:2px solid var(--brand); border-color:transparent}
    .controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:16px}
    button{
      background:linear-gradient(180deg, #223273, #1a2555); color:#eaf0ff; border:1px solid #2e3a7a; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700;
    }
    button.ghost{background:transparent; border:1px dashed #3a456e; color:#c8cfec}
    button.good{background:linear-gradient(180deg, #1e5a39, #184b2f); border-color:#1f734a}
    button.warn{background:linear-gradient(180deg, #7a3f12, #5b2f0c); border-color:#8f4f16}
    .hint{font-size:.9rem; color:#c4cbff; margin:8px 0 0}
    .hidden{display:none}
    .result h2{margin:.2rem 0 .6rem}
    .tag{display:inline-block; margin-right:8px; margin-top:6px; padding:4px 8px; border-radius:999px; font-size:.85rem; border:1px solid #33406e; background:#131a3a}
    .desc{color:#d2d7f7}
    .grid-2{display:grid; gap:14px; grid-template-columns:repeat(2, minmax(0, 1fr))}
    @media (max-width:720px){ .optgrid,.grid-2{grid-template-columns:1fr} }
    details{border:1px dashed #2c355e; border-radius:12px; padding:12px 14px; background:#0c1433; margin-top:14px}
    details[open]{border-style:solid}
    summary{cursor:pointer; font-weight:700}
    .typebook li{margin:.35rem 0}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid #314173; background:#0f1638; margin:4px 6px 0 0}
    .small{font-size:.88rem}
    footer{margin-top:28px; color:#8f97b8; font-size:.9rem}
    .sr{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;}
    .longdesc{margin-top:10px; color:#cfd5ff; font-size:.95rem}
    .longdesc ul{margin:6px 0 0 1.1rem}
    .hr-line{height:1px; background:#1a2246; border:none; margin:12px 0}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <div style="font-size:1.4rem">ğŸ¦·</div>
        <div>
          <h1>ì¹˜ìœ„ìƒì‚¬ ë§ì¶¤í˜• 10ìœ í˜• MBTI</h1>
          <div class="muted small">ì§„ìƒ í™˜ì / í‡´ê·¼ 5ë¶„ ì „ / ì•¼ê°„ ê·¼ë¬´ / ì ì‹¬ ë©”ë‰´â€¦ ë¦¬ì–¼ ìƒí™© í…ŒìŠ¤íŠ¸</div>
        </div>
      </div>
      <div class="badge">ë‹¨ë… í˜ì´ì§€ â€¢ ì˜¤í”„ë¼ì¸ ë™ì‘</div>
    </header>

    <!-- QUIZ PANEL -->
    <section id="quiz" class="card">
      <div class="muted small" id="progressLabel">0 / 8</div>
      <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>

      <form id="form" autocomplete="off">
        <!-- Questions are injected here -->
        <div id="qs"></div>

        <div class="controls">
          <button type="button" id="btnPrev" class="ghost">ì´ì „</button>
          <button type="button" id="btnNext">ë‹¤ìŒ</button>
          <button type="submit" id="btnSubmit" class="good hidden">ê²°ê³¼ ë³´ê¸°</button>
        </div>
        <div class="hint">ëª¨ë“  ë¬¸í•­ì— ë‹µí•˜ë©´ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</div>
      </form>
    </section>

    <!-- RESULT PANEL -->
    <section id="result" class="card hidden result" aria-live="polite">
      <div class="muted small">ê²°ê³¼</div>
      <h2 id="resultTitle">â€”</h2>
      <div id="resultDesc" class="desc">â€”</div>
      <div id="resultLongDesc" class="longdesc hidden"></div>

      <div style="margin-top:12px">
        <span id="resultTags"></span>
      </div>

      <div class="controls" style="margin-top:16px">
        <button type="button" id="btnCopyLink">ê²°ê³¼ ë§í¬ ë³µì‚¬</button>
        <button type="button" id="btnShare" class="ghost">ê³µìœ í•˜ê¸°(ëª¨ë°”ì¼)</button>
        <button type="button" id="btnCopyText" class="ghost">ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬</button>
        <button type="button" id="btnReset" class="warn">ë‹¤ì‹œ í•˜ê¸°</button>
      </div>

      <!-- â–¼ ìœ í˜• ëª¨ì•„ë³´ê¸°: ê²°ê³¼ í˜ì´ì§€ì—ì„œë§Œ ë…¸ì¶œ -->
      <details id="typeBook" class="hidden">
        <summary>ë‹¤ë¥¸ ìœ í˜• ëª©ë¡ ë³´ê¸°</summary>
        <ul class="typebook" id="typeList"></ul>
      </details>
    </section>

    <footer>
      <div>ğŸ”— ê³µìœ  ë§í¬ëŠ” í˜„ì¬ í˜ì´ì§€ ì£¼ì†Œì— ê²°ê³¼ ì½”ë“œ(<code>?r=íƒ€ì…</code>)ë¥¼ ë§ë¶™ì—¬ ìƒì„±ë©ë‹ˆë‹¤.</div>
      <div>Â© 2025 â€” ëŒ€í˜¸ë‹˜ ê¹ƒí—ˆë¸Œ ë°°í¬ìš© ë‹¨ë… í˜ì´ì§€. ìˆ˜ì •/í™œìš© ììœ .</div>
    </footer>
  </div>

  <script>
    // -----------------------------
    // 1) TYPE DEFINITIONS (ìƒì„¸ì„¤ëª… í¬í•¨)
    // -----------------------------
    const TYPES = [
      {
        id: 1, emoji:"ğŸª¥", name:"ì¹˜ì„ íŒŒì´í„°í˜•",
        desc:"ì´ˆìŒíŒŒ ìŠ¤ì¼€ì¼ëŸ¬ë¡œ ì„¸ìƒ ëª¨ë“  ì¹˜ì„ê³¼ ì „ìŸ ì¤‘. ìš”ì²­ì´ ê³¼í•˜ë©´ ì¼ì •ë¶€í„° ì •ë¦¬í•˜ê³  ë“¤ì–´ê°€ëŠ” ì‹¤ì „ì£¼ì˜.",
        longDesc:[
          "ì¹˜ì„Â·ì°©ìƒ‰ ì œê±°ì—ì„œ ì„±ì·¨ê° ìµœëŒ€ë¡œ ë½‘ì•„ë‚´ëŠ” íƒ€ì…",
          "í˜„ì¥ ìš°ì„ : ì¥ë¹„/ì‹œê°„/ê°ì—¼ê´€ë¦¬ ë£¨í‹´ì„ ë¨¼ì € ì ê²€",
          "ê³¼ë‹¤ ìš”êµ¬ì—” ì¹˜ë£Œ ë²”ìœ„Â·ì‹œê°„ì„ ëª…í™•íˆ ì„¤ì •í•´ í”¼ë¡œ ëˆ„ì  ë°©ì§€"
        ],
        tags:["í˜„ì¥ì§‘ì¤‘","ìš°ì„ ìˆœìœ„","ë‹¨í˜¸í•¨"]
      },
      {
        id: 2, emoji:"ğŸ“‘", name:"ê¸°ë¡ ìˆ˜í˜¸ìí˜•",
        desc:"ê¸°ë¡ ëˆ„ë½ì€ ê³§ í˜¼ëˆ. ì°¨íŠ¸ì™€ ì¦ê±°ë¡œ ë¬´ì¥í•˜ëŠ” â€˜ë°ì´í„° ì£¼ë„â€™ ì‹¤ë¬´ì™•.",
        longDesc:[
          "ì°¨íŠ¸Â·ì¹˜ì£¼í¬ì¼“ ê¸°ë¡Â·ì¹˜ì„ëŸ‰ ë©”ëª¨ ë“± â€˜í”ì  ë‚¨ê¸°ê¸°â€™ê°€ ìŠµê´€",
          "ì´ìŠˆ ë°œìƒ ì‹œ íƒ€ì„ë¼ì¸ì„ ì¬êµ¬ì„±í•´ ì›ì¸ íŒŒì•…ì´ ë¹ ë¦„",
          "ì „ì›ì˜ ì‘ì—… ì§€ì¹¨ì„ ë¬¸ì„œí™”í•´ ì¸ìˆ˜ì¸ê³„ë¥¼ ê¹”ë”íˆ"
        ],
        tags:["ê¸°ë¡ê°•ë°•","ì •í™•ì„±","ê·¼ê±°ì¤‘ì‹¬"]
      },
      {
        id: 3, emoji:"ğŸ˜Š", name:"ì›ƒìŒ ë°©íŒ¨í˜•",
        desc:"ë§ë„ ì•ˆ ë˜ëŠ” ìš”êµ¬ë„ ë¯¸ì†Œë¡œ í¡ìˆ˜í•˜ëŠ” ëŒ€ì¸ì „ ì„¤ê³„ì. ê´€ê³„ì˜ ê¸°ìˆ ë¡œ ë‚œì´ë„ í•˜ë½!",
        longDesc:[
          "ê°ì •ì™„ì¶© ì¥ì¹˜: ë¶ˆë§Œì„ â€˜ìš”êµ¬â€™ë¡œ ë²ˆì—­í•´ ëŒ€í™” ê°€ëŠ¥ ìƒíƒœë¡œ ì „í™˜",
          "ê³ ê°ì˜ ë§ â€˜ìš”ì§€â€™ë¥¼ ê¸ì • ì–¸ì–´ë¡œ ì¬ì •ë ¬í•´ í˜‘ì¡°ë¥¼ ìœ ë„",
          "ê³¼ë„í•œ â€˜ë§ì¶¤â€™ ìš”êµ¬ì—” ë³‘ì› ì •ì±…/ì•ˆì „ ê°€ì´ë“œë¥¼ ë¶€ë“œëŸ½ê²Œ ì œì‹œ"
        ],
        tags:["ê´€ê³„ê´€ë¦¬","ì„œë¹„ìŠ¤ê°ì •","ìœ„ê¸°ì™„í™”"]
      },
      {
        id: 4, emoji:"â³", name:"ì¹¼í‡´ ì‹œê³„í˜•",
        desc:"ì‹œê°„ê´€ë¦¬ê³„ì˜ ì‹¤ë¦¬ì£¼ì˜ì. í‡´ê·¼ 5ë¶„ ì „ë¶€í„° ë‡Œê°€ ì§‘ìœ¼ë¡œ ê°€ëŠ” íƒ€ì….",
        longDesc:[
          "ë§ˆê° ë£¨í‹´ì´ í™•ì‹¤: ì†Œë…Â·ì •ë¦¬Â·ì“°ë ˆê¸° ë¶„ë¦¬Â·ë‹¤ìŒë‚  ì¤€ë¹„ê¹Œì§€ ì²´í¬",
          "ìŠ¤ì¼€ì¤„ ì§€ì—° ì‹œ ëŒ€ì•ˆ í”Œëœ B/Cë¡œ ë³‘ëª© ìµœì†Œí™”",
          "ì•¼ê°„ ê·¼ë¬´ì¼ì—” ì²´ë ¥Â·íƒ„ìˆ˜í™”ë¬¼Â·ìˆ˜ë¶„ ë£¨í‹´ì„ ë¯¸ë¦¬ ì„¤ê³„"
        ],
        tags:["ìš°ì„ ìˆœìœ„","ì†ë„ê°","í˜„ì‹¤ê°ê°"]
      },
      {
        id: 5, emoji:"â˜•", name:"ì¹´í˜ì¸ ì—”ì§„í˜•",
        desc:"ì¹´í˜ì¸ì´ ìœ¤í™œìœ . ì•¼ê°„ ê·¼ë¬´ë„ ì›ìƒ·í•˜ë©´ ì¬ê°€ë™.",
        longDesc:[
          "ì¹´í˜ì¸ íƒ€ì´ë° ê´€ë¦¬: ì˜¤ì „ ì§‘ì¤‘/ì˜¤í›„ ìŠ¬ëŸ¼í”„/ì•¼ê°„ ë¦¬ë¶€íŠ¸",
          "ì¹´í˜ì¸ ê³¼ë‹¤ ì‹œ ìˆ˜ë¶„Â·ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­ìœ¼ë¡œ ë¶€ì‘ìš© ì™„í™”",
          "íŒ€ ì‚¬ê¸° ë³´ì •: ì»¤í”¼ í”½ì—…ì´ ìì—°ìŠ¤ëŸ° íŒ€ì¼€ì–´ë¡œ ì´ì–´ì§"
        ],
        tags:["ì—ë„ˆì§€ê´€ë¦¬","ë¦¬ì¶”ì–¼","ì§€ì†ë ¥"]
      },
      {
        id: 6, emoji:"ğŸ¤", name:"ì„¤ë“ ë§ˆì—ìŠ¤íŠ¸ë¡œí˜•",
        desc:"ì„¤ëª…, ë¹„ìœ , ê³µê°ì˜ 3ë‹¨ ì½¤ë³´ë¡œ ë¶ˆì•ˆì„ ì‹ ë¢°ë¡œ ë°”ê¾¸ëŠ” ìƒë‹´ì˜ ì—°ê¸ˆìˆ ì‚¬.",
        longDesc:[
          "ì‹œê°ìë£ŒÂ·ëª¨í˜•Â·ì‚¬ì§„ì„ í™œìš©í•´ â€˜ë³´ì´ëŠ” ì„¤ëª…â€™ì„ ì„ í˜¸",
          "ê¸ˆê¸°ì–´(ê³¼ë„í•œ ì „ë¬¸ìš©ì–´) ëŒ€ì‹  ì¼ìƒ ì–¸ì–´ë¡œ ë¶ˆì•ˆ í•´ì†Œ",
          "ì¹˜ë£Œ í›„ ê´€ë¦¬ë²•ì„ â€˜í–‰ë™ ë‹¨ìœ„â€™ë¡œ ë³€í™˜í•´ ì´í–‰ë¥  ìƒìŠ¹"
        ],
        tags:["ì»¤ë®¤ë‹ˆì¼€ì´ì…˜","ë…¼ë¦¬+ê³µê°","êµìœ¡ì"]
      },
      {
        id: 7, emoji:"ğŸ§˜", name:"ë©˜íƒˆ ìš”ê°€í˜•",
        desc:"â€œê´œì°®ì•„ìš”~ ë‹¤ ì˜ ë¼ìš”â€ë¡œ íŒ€ê³¼ í™˜ìì˜ ì‹¬ë°•ìˆ˜ë¥¼ ë‚®ì¶”ëŠ” í”¼ìŠ¤ë©”ì´ì»¤.",
        longDesc:[
          "íŒ€ ë²ˆì•„ì›ƒ ì‹ í˜¸ë¥¼ ì˜ í¬ì°©: ê°„ë‹¨í•œ ì²´ì¡°/ë¬¼/ê°„ì‹ ì œì•ˆ",
          "í™˜ì ê³µí¬ ë°˜ì‘(ë•€/í˜¸í¡/ì‹œì„ )ì„ ì•ˆì •í™” ë£¨í‹´ìœ¼ë¡œ ì¼€ì–´",
          "ê°ˆë“± ìƒí™©ì—ì„œë„ ëª©ì†Œë¦¬ í†¤Â·ì†ë„ë¥¼ ë‚®ì¶° ë¶„ìœ„ê¸° ë³µì›"
        ],
        tags:["ì•ˆì •ê°","ê°ì •ì¼€ì–´","íŒ€ë²„í¼"]
      },
      {
        id: 8, emoji:"ğŸ•µï¸â€â™€ï¸", name:"ì°¨íŠ¸ íƒí—˜ê°€í˜•",
        desc:"ì˜› ê¸°ë¡Â·ë§¤ë‰´ì–¼ê¹Œì§€ ë°œêµ´í•˜ëŠ” ë°ì´í„° ì‚¬ëƒ¥ê¾¼. ê·¼ê±°ì˜ ë¯¸ë¡œë¥¼ í™˜í•˜ê²Œ.",
        longDesc:[
          "ì´ì „ ë³‘ë ¥/ê²€ì‚¬ê²°ê³¼/íˆ¬ì•½ì´ë ¥ êµì°¨ í™•ì¸ìœ¼ë¡œ ì˜¤ë¥˜ ì˜ˆë°©",
          "ê¸°ê¸° íŠ¸ëŸ¬ë¸” ì‹œ ë§¤ë‰´ì–¼Â·ì»¤ë®¤ë‹ˆí‹° ë ˆí¼ëŸ°ìŠ¤ê¹Œì§€ ì‹ ì† íƒìƒ‰",
          "â€˜ì°¾ì•„ë³´ê¸°â€™ ìì²´ë¥¼ ì—…ë¬´ í‘œì¤€ìœ¼ë¡œ ë§Œë“¤ì–´ íŒ€ ì§€ì‹ ì¶•ì "
        ],
        tags:["íƒìƒ‰ë ¥","ë ˆí¼ëŸ°ìŠ¤","ë¬¸ì œí•´ê²°"]
      },
      {
        id: 9, emoji:"ğŸ£", name:"ìŠ¤íƒ­ë£¸ ê°œê·¸ëŸ¬í˜•",
        desc:"ë°ˆÂ·ë“œë¦½Â·ìƒí™©ê·¹ìœ¼ë¡œ íœ´ê²Œì‹¤ ì‚°ì†Œ ê³µê¸‰. ê¸´ì¥ê° OFF, íŒ€ ë¶„ìœ„ê¸° ON.",
        longDesc:[
          "í˜„ì¥ ê¸´ì¥ ì™„í™”ë¡œ ì† ë–¨ë¦¼Â·ë§ ê¼¬ì„ ë“± ì‹¤ìˆ˜ìœ¨ ê°ì†Œì— ê¸°ì—¬",
          "í™˜ì ì•ì—ì„œëŠ” â€˜í†¤ ì¡°ì ˆâ€™ë¡œ í”„ë¡œí˜ì…”ë„ ìœ ì§€",
          "íŒ€ í–‰ì‚¬Â·ìƒì¼Â·ì‘ì€ ì´ë²¤íŠ¸ë¥¼ ì±™ê²¨ ì¡°ì§ ê²°ì†ë„â†‘"
        ],
        tags:["ë¶„ìœ„ê¸°ë©”ì´ì»¤","ë¦¬í”„ë ˆì‹œ","íŒ€ì¼€ì–´"]
      },
      {
        id: 10, emoji:"ğŸ“¡", name:"ì›ì¥ë‹˜ ìœ„ì„±í˜•",
        desc:"ì›ì¥ë‹˜ ì–¸ì–´ì™€ ëˆˆë¹›ì„ ì‹¤ì‹œê°„ ìˆ˜ì‹ í•˜ëŠ” ì´ˆì •ë°€ ë ˆì´ë” íƒ‘ì¬.",
        longDesc:[
          "ì²˜ì¹˜ì‹¤/ìƒë‹´ì‹¤ ë™ì‹œ ëª¨ë‹ˆí„°ë§ìœ¼ë¡œ ë‹¤ìŒ ë™ì‘ì„ ì˜ˆì¸¡",
          "ì• ë§¤í•œ ì§€ì‹œë„ â€˜ì˜ë„â€™ íŒŒì•…í•´ ì˜¤í•´Â·ì¤‘ë³µ ì‘ì—… ë°©ì§€",
          "ì •ì±… ë³€ê²½Â·ì¥ë¹„ ì—…ê·¸ë ˆì´ë“œ ì‹œ íŒ€ ì ìš©ì„ ë¹ ë¥´ê²Œ ë¦¬ë“œ"
        ],
        tags:["ì¡°ì§ê°ê°","ìƒí™©íŒë‹¨","ìˆœê°„ëŒ€ì‘"]
      }
    ];

    // -----------------------------
    // 2) QUIZ DATA (8 QUESTIONS)
    // -----------------------------
    const QUESTIONS = [
      {
        t:"ì§„ìƒ ê³ ê°ì´ ë“¤ì–´ì™”ë‹¤! ë‚˜ëŠ”?",
        a:[
          {text:"ì°¨íŠ¸ë¶€í„° ë‹¤ì‹œ í™•ì¸", type:2},
          {text:"ëê¹Œì§€ ì›ƒìœ¼ë©° ì‘ëŒ€", type:3},
          {text:"ì›ì¥ë‹˜ í˜¸ì¶œë¶€í„°", type:10},
          {text:"ì†ìœ¼ë¡œ í‡´ê·¼ ì¹´ìš´íŠ¸ë‹¤ìš´", type:4},
        ]
      },
      {
        t:"í‡´ê·¼ 5ë¶„ ì „, ì˜ˆì•½ ì—†ëŠ” í™˜ìê°€ ë“¤ì–´ì™”ë‹¤!",
        a:[
          {text:"ê¸°ë¡ í™•ì¸í•˜ë©° í•œìˆ¨", type:2},
          {text:"â€œë„¤^^â€ ì–µì§€ ë¯¸ì†Œ", type:3},
          {text:"ì´ë¯¸ ê°€ë°©ì— ì†", type:4},
          {text:"â€œì˜¤ëŠ˜ì€ ê°„ë‹¨ ì¹˜ë£Œë§Œìš”â€", type:1},
        ]
      },
      {
        t:"íŒ€ íšŒì‹ì—ì„œ ë‚˜ëŠ”?",
        a:[
          {text:"ì§¤ê³¼ ë“œë¦½ìœ¼ë¡œ í­ê²©", type:9},
          {text:"ì›ì¥ë‹˜ ì˜†ìë¦¬ ìë™ ì°©ì„", type:10},
          {text:"ì°¨íŠ¸ ì–˜ê¸°í•˜ë‹¤ í˜¼ë‚¨", type:2},
          {text:"ìˆ  ëŒ€ì‹  ì»¤í”¼ë§Œ ì°¾ìŒ", type:5},
        ]
      },
      {
        t:'í™˜ìê°€ â€œì¹˜ë£Œ ë¬´ì„­ë‹¤â€ê³  í•˜ë©´?',
        a:[
          {text:"â€œê´œì°®ì•„ìš”~ ë‹¤ ì˜ ë¼ìš”â€", type:7},
          {text:"ì¹˜ë£Œê³¼ì • 20ë¶„ í’€ì„¤ëª…", type:6},
          {text:"ì°¨íŠ¸ ë³´ì—¬ì£¼ë©° ê·¼ê±° ì œì‹œ", type:2},
          {text:"ì›ì¥ë‹˜ ëˆˆë¹› ë¨¼ì € íƒìƒ‰", type:10},
        ]
      },
      {
        t:"í™˜ì ìƒë‹´ ì¤€ë¹„í•  ë•Œ ë‚˜ëŠ”?",
        a:[
          {text:"ë‚´ë¶€ ê¸°ë¡/ë§¤ë‰´ì–¼ ì´ë™ì›", type:8},
          {text:"ê·¸ëƒ¥ ë§ë¹¨ë¡œ ì„¤ë“", type:6},
          {text:"â€œí¸í•˜ê²Œ ì•‰ìœ¼ì„¸ìš”~â€ ìœ„ë¡œ", type:7},
          {text:"ì»¤í”¼ë¶€í„° ë§ˆì‹¬", type:5},
        ]
      },
      {
        t:"ì ì‹¬ì‹œê°„ì´ ë˜ì–´ê°„ë‹¤. ë©”ë‰´ë¥¼ ê³ ë¥¼ ë•Œ ë‚˜ëŠ”?",
        a:[
          {text:"ì¹˜ì„ ì œê±°ë³´ë‹¤ ì–´ë ¤ìš´ ì„ íƒ", type:1},
          {text:"ê²°êµ­ â€œê·¸ëƒ¥ ì–´ì œ ë¨¹ì€ ê±¸ë¡œâ€¦â€", type:2},
          {text:"ë‹¨í†¡ë°©ì—ì„œ ê°œê·¸ ì¹˜ë‹¤ ë©”ë‰´ ë†“ì¹¨", type:9},
          {text:"ì›ì¥ë‹˜ì´ ë­˜ ë“œì‹œëŠ”ì§€ ë¨¼ì € ë³¸ë‹¤", type:10},
        ]
      },
      {
        t:"í™˜ìê°€ ìš”êµ¬ì‚¬í•­ì„ ë„ˆë¬´ ë§ì´ ë§í•  ë•Œ ë‚˜ëŠ”?",
        a:[
          {text:"â€œê·¸ê±´ ì¼ì •ìƒ ì–´ë µìŠµë‹ˆë‹¤â€ ë‹¨í˜¸ ëª¨ë“œ", type:1},
          {text:"ê²°êµ­ ë‹¤ ë“¤ì–´ì¤Œ", type:3},
          {text:"ì„¤ëª… 10ë¶„ ì¶”ê°€", type:6},
          {text:"ê¸°ë¡ ë‹¤ ì ì–´ë‘ ", type:2},
        ]
      },
      {
        t:"ì˜¤ëŠ˜ì€ ì•¼ê°„ ê·¼ë¬´ê°€ ìˆëŠ” ë‚ ì´ë‹¤. ë‚´ ë¨¸ë¦¿ì†ì— ë“œëŠ” ìƒê°ì€?",
        a:[
          {text:"â€œì»¤í”¼ ë‘ ì”ì€ ê¸°ë³¸ì´ì§€â€", type:5},
          {text:"â€œê·¸ë˜ë„ í™˜ìë¶„ë“¤ í˜ë‚´ì‹œë¼ í•´ì•¼ì§€â€", type:7},
          {text:"â€œëë‚˜ê³  ë­ ë¨¹ì„ê¹Œ?â€ ë©”ë‰´ íƒìƒ‰ ëª¨ë“œ", type:9},
          {text:"â€œí‡´ê·¼ì€ ì™œ ì´ë ‡ê²Œ ë©€ë¦¬ ìˆëƒâ€¦â€", type:4},
        ]
      },
    ];

    // -----------------------------
    // 3) BUILD QUIZ UI
    // -----------------------------
    const $qs = document.getElementById('qs');
    const $form = document.getElementById('form');
    const $btnPrev = document.getElementById('btnPrev');
    const $btnNext = document.getElementById('btnNext');
    const $btnSubmit = document.getElementById('btnSubmit');
    const $bar = document.getElementById('bar');
    const $progressLabel = document.getElementById('progressLabel');

    const $quiz = document.getElementById('quiz');
    const $result = document.getElementById('result');
    const $resultTitle = document.getElementById('resultTitle');
    const $resultDesc = document.getElementById('resultDesc');
    const $resultLongDesc = document.getElementById('resultLongDesc');
    const $resultTags = document.getElementById('resultTags');

    const $btnCopyLink = document.getElementById('btnCopyLink');
    const $btnShare = document.getElementById('btnShare');
    const $btnCopyText = document.getElementById('btnCopyText');
    const $btnReset = document.getElementById('btnReset');

    const $typeBook = document.getElementById('typeBook');
    const $typeList = document.getElementById('typeList');

    let current = 0; // index of current question
    const answers = new Array(QUESTIONS.length).fill(null);

    function buildQuestion(i){
      const q = QUESTIONS[i];
      const qId = `q${i}`;
      const wrap = document.createElement('div');
      wrap.className = 'qwrap';
      wrap.innerHTML = `
        <div class="q">${i+1}. ${q.t}</div>
        <div class="optgrid" role="group" aria-labelledby="${qId}">
          ${q.a.map((opt, idx) => `
            <label class="opt" data-q="${i}" data-a="${idx}" tabindex="0">
              <input class="sr" type="radio" name="q${i}" value="${idx}" aria-label="${opt.text}">
              <div><strong>${String.fromCharCode(65+idx)}.</strong> ${opt.text}</div>
            </label>
          `).join('')}
        </div>
      `;
      // selection handler
      wrap.querySelectorAll('.opt').forEach(el=>{
        el.addEventListener('click', ()=>{
          select(i, parseInt(el.dataset.a,10));
        });
        el.addEventListener('keypress', (e)=>{
          if(e.key==='Enter' || e.key===' ') { e.preventDefault(); select(i, parseInt(el.dataset.a,10)); }
        });
      });
      return wrap;
    }

    function renderAll(){
      $qs.innerHTML = '';
      QUESTIONS.forEach((_, i)=> $qs.appendChild(buildQuestion(i)));
      updateUI();
    }

    function select(qIdx, aIdx){
      answers[qIdx] = aIdx;
      // mark selected
      const group = $qs.querySelectorAll(`.opt[data-q="${qIdx}"]`);
      group.forEach(el=> el.removeAttribute('selected'));
      const chosen = $qs.querySelector(`.opt[data-q="${qIdx}"][data-a="${aIdx}"]`);
      if(chosen) { chosen.setAttribute('selected',''); }
      updateUI();
    }

    function updateUI(){
      // show only current question
      document.querySelectorAll('.qwrap').forEach((node, i)=>{
        node.style.display = (i===current) ? '' : 'none';
      });
      // progress
      const answered = answers.filter(v=>v!==null).length;
      $progressLabel.textContent = `${answered} / ${QUESTIONS.length}`;
      $bar.style.width = `${(answered/QUESTIONS.length)*100}%`;

      // buttons
      $btnPrev.disabled = (current===0);
      const isLast = (current===QUESTIONS.length-1);
      $btnNext.classList.toggle('hidden', isLast);
      $btnSubmit.classList.toggle('hidden', !isLast);
    }

    $btnPrev.addEventListener('click', ()=>{ if(current>0){ current--; updateUI(); } });
    $btnNext.addEventListener('click', ()=>{
      if(answers[current]===null){ shakeCurrent(); return; }
      if(current<QUESTIONS.length-1){ current++; updateUI(); }
    });
    function shakeCurrent(){
      const node = document.querySelectorAll('.qwrap')[current];
      node.style.transition = 'transform .08s';
      node.style.transform = 'translateX(6px)';
      setTimeout(()=>{ node.style.transform = 'translateX(-6px)'; }, 80);
      setTimeout(()=>{ node.style.transform = 'translateX(0)'; }, 160);
    }

    $form.addEventListener('submit', (e)=>{
      e.preventDefault();
      if(answers.some(v=>v===null)){ shakeCurrent(); return; }
      const counts = tally();
      const result = pickResult(counts);
      showResult(result);
      // push state with share code
      const code = result.ids.join('-');
      const url = new URL(location.href);
      url.searchParams.set('r', code);
      history.replaceState(null, '', url.toString());
    });

    function tally(){
      const counts = new Map(TYPES.map(t=>[t.id,0]));
      answers.forEach((aIdx, qi)=>{
        const typeId = QUESTIONS[qi].a[aIdx].type;
        counts.set(typeId, counts.get(typeId)+1);
      });
      return counts;
    }

    function pickResult(counts){
      const arr = [...counts.entries()].sort((a,b)=> b[1]-a[1] || a[0]-b[0]);
      const max = arr[0][1];
      const top = arr.filter(([id,c])=> c===max).map(([id])=>id);
      if(top.length===1){
        return { ids:[top[0]], mixed:false };
      }else{
        return { ids: top.slice(0,2), mixed:true };
      }
    }

    function showResult({ids, mixed}){
      const ts = ids.map(id=> TYPES.find(t=>t.id===id));
      const title = mixed
        ? `${ts[0].emoji} ${ts[0].name} + ${ts[1].emoji} ${ts[1].name}`
        : `${ts[0].emoji} ${ts[0].name}`;
      const desc = mixed
        ? `${ts[0].desc} <br/><br/>ê·¸ë¦¬ê³  <strong>${ts[1].name}</strong> ê¸°ì§ˆì´ ê°•í•˜ê²Œ í•¨ê»˜ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ ë‘ ì„±í–¥ì´ ë²ˆê°ˆì•„ ì „ë©´ì— ë“±ì¥í•´ ë°¸ëŸ°ìŠ¤ë¥¼ ì¡ëŠ” íƒ€ì…!`
        : ts[0].desc;

      $quiz.classList.add('hidden');
      $result.classList.remove('hidden');
      $resultTitle.innerHTML = title;
      $resultDesc.innerHTML = desc;

      // ìƒì„¸ì„¤ëª…(í•´ë‹¹ íƒ€ì…ë“¤ì˜ longDesc í•©ì³ì„œ ë…¸ì¶œ)
      const longBlocks = ts.map(t => `
        <div class="hr-line"></div>
        <div><strong>${t.emoji} ${t.name} ìƒì„¸ì„¤ëª…</strong></div>
        <ul>${t.longDesc.map(li=>`<li>${li}</li>`).join('')}</ul>
      `).join('');
      $resultLongDesc.innerHTML = longBlocks;
      $resultLongDesc.classList.remove('hidden');

      // tags (union)
      const tagSet = new Set();
      ts.forEach(t => t.tags.forEach(tag => tagSet.add(tag)));
      $resultTags.innerHTML = [...tagSet].map(tag => `<span class="pill">#${tag}</span>`).join('');

      // â–¼ ìœ í˜• ëª¨ì•„ë³´ê¸°: ê²°ê³¼ í˜ì´ì§€ì—ì„œë§Œ ë³´ì´ë„ë¡ ì—¬ê¸°ì„œë§Œ ì„¸íŒ…/í‘œì‹œ
      $typeList.innerHTML = TYPES.map(t=>`
        <li>
          <strong>${t.emoji} ${t.name}</strong> â€” <span class="muted">${t.desc}</span>
          <details style="margin-top:6px"><summary>ìƒì„¸ì„¤ëª… í¼ì¹˜ê¸°</summary>
            <div class="longdesc"><ul>${t.longDesc.map(li=>`<li>${li}</li>`).join('')}</ul></div>
          </details>
        </li>
      `).join('');
      $typeBook.classList.remove('hidden');
    }

    // -----------------------------
    // 4) SHARE / COPY
    // -----------------------------
    function currentShareURL(){
      const url = new URL(location.href);
      if($result.classList.contains('hidden')){
        url.searchParams.delete('r');
      }
      return url.toString();
    }
    async function copyToClipboard(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("í´ë¦½ë³´ë“œì— ë³µì‚¬ëì–´ìš”!");
      }catch{
        const ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta);
        ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
        toast("ë³µì‚¬ ì™„ë£Œ!");
      }
    }
    function toast(msg){
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.position='fixed'; t.style.left='50%'; t.style.top='16px'; t.style.transform='translateX(-50%)';
      t.style.background='#111833'; t.style.border='1px solid #2f3a6d'; t.style.padding='8px 12px'; t.style.borderRadius='10px';
      t.style.boxShadow='0 8px 30px rgba(0,0,0,.4)'; t.style.zIndex=9999;
      document.body.appendChild(t);
      setTimeout(()=>{ t.style.opacity='0'; t.style.transition='opacity .3s'; }, 1200);
      setTimeout(()=>{ t.remove(); }, 1600);
    }
    document.getElementById('btnCopyLink').addEventListener('click', ()=>{
      if(!$result.classList.contains('hidden')){
        const url = new URL(location.href);
        if(!url.searchParams.get('r')){
          const counts = tally();
          const picked = pickResult(counts);
          url.searchParams.set('r', picked.ids.join('-'));
          history.replaceState(null, '', url.toString());
        }
      }
      copyToClipboard(currentShareURL());
    });
    document.getElementById('btnShare').addEventListener('click', async ()=>{
      const url = currentShareURL();
      const title = "ì¹˜ìœ„ìƒì‚¬ 10ìœ í˜• MBTI â€” ë‚´ ê²°ê³¼";
      const text = $result.classList.contains('hidden') ? "ë‚´ ì„±í–¥ ì•Œì•„ë³´ê¸°" : $resultTitle.textContent.trim();
      if(navigator.share){
        try{ await navigator.share({title, text, url}); }catch{}
      }else{
        copyToClipboard(url);
      }
    });
    document.getElementById('btnCopyText').addEventListener('click', ()=>{
      const text = `ì¹˜ìœ„ìƒì‚¬ 10ìœ í˜• ê²°ê³¼\n${$resultTitle.textContent.trim()}\n\n${$resultDesc.textContent.replace(/\s+/g,' ').trim()}\n\në§í¬: ${currentShareURL()}`;
      copyToClipboard(text);
    });

    document.getElementById('btnReset').addEventListener('click', ()=>{
      for(let i=0;i<answers.length;i++) answers[i]=null;
      current = 0;
      renderAll();
      $result.classList.add('hidden');
      $typeBook.classList.add('hidden'); // ê²°ê³¼ í˜ì´ì§€ì—ì„œë§Œ ë³´ì´ê²Œ ì¬ìˆ¨ê¹€
      const url = new URL(location.href); url.searchParams.delete('r');
      history.replaceState(null, '', url.toString());
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // -----------------------------
    // 5) DEEPLINK (?r=1 or ?r=1-4) â†’ ê²°ê³¼ í˜ì´ì§€ë¡œ ë°”ë¡œ ë Œë”
    // -----------------------------
    function tryOpenByCode(){
      const url = new URL(location.href);
      const r = url.searchParams.get('r');
      if(!r) return false;
      const ids = r.split('-').map(s=>parseInt(s,10)).filter(n=>!isNaN(n));
      if(ids.length===0) return false;
      const ok = ids.every(id => TYPES.some(t=>t.id===id));
      if(!ok) return false;
      showResult({ids, mixed: ids.length>1});
      return true;
    }

    // -----------------------------
    // Init
    // -----------------------------
    renderAll();
    if(!tryOpenByCode()){
      setTimeout(()=>{
        const first = document.querySelector('.opt[data-q="0"][data-a="0"]');
        first && first.focus();
      }, 50);
    }
  </script>
</body>
</html>
